<div ng-controller="ClientDashboardCtrl" flex layout="row">
    <md-card ng-show="isAllowed('userfo')" md-theme="light" md-theme-watch flex>
        <md-card-content layout="column">

          <md-tabs md-dynamic-height="true" md-border-bottom="true" md-selected="currentTabIndex">
            <md-tab label="{{ 'Risks' | translate }}" md-on-select="selectGraphRisks()">
            </md-tab>

            <md-tab label="{{ 'Threats' | translate }}" md-on-select="selectGraphThreats()">
            </md-tab>

            <md-tab label="{{ 'Vulnerabilities' | translate }}" md-on-select="selectGraphVulnerabilities()">
            </md-tab>

            <md-tab label="{{ 'Cartography' | translate }}" md-on-select="selectGraphCartography()">
            </md-tab>

            <!-- <md-tab label="{{ 'Decision support' | translate }}" md-on-select="selectGraphDecisionSupport()">
            </md-tab>

            <md-tab label="{{ 'Perspective' | translate }}" md-on-select="selectGraphPerspective()">
            </md-tab> -->
          </md-tabs>

            <div layout="row" layout-align="space-around" >
                <div layout="column" flex="35">

                  <meta name="viewport" content="width=device-width, initial-scale=1">

                      <p class="md-title" ng-show ="dashboard.showGraphFrame1" id="graphFrame1_title" translate>Current risks map</p>

                      <div layout="line">

                          <!-- <input class="container" type="radio" name="contact" value="email" checked="checked">
                          <label translate></label>

                          <input class="container" type="radio" name="contact" value="phone">
                          <label translate></label> -->

                          <md-input-container id="riskTab" ng-show ="showRisksTabs">
                              <label translate>Display actual risks by</label>
                              <md-select ng-model="displayActualRisksBy">
                                  <md-option value="level" selected>{{ 'Level' | translate }}</md-option>
                                  <md-option value="asset" >{{ 'Asset' | translate }}</md-option>
                              </md-select>
                          </md-input-container>

                          <md-input-container id="riskTab" ng-show ="showRisksTabs && displayActualRisksBy=='level'">
                              <label translate>Type of chart</label>
                              <md-select ng-model="actualRisksChartOptions">
                                  <md-option value="optionsCartoRisk_discreteBarChart" selected>{{ 'Discrete Bar Chart' | translate }}</md-option>
                                  <md-option value="optionsCartoRisk_pieChart" >{{ 'Donut Chart' | translate }}</md-option>
                              </md-select>
                          </md-input-container>

                      </div>

                      <md-input-container ng-show ="showThreatsTabs">
                          <label translate>Display threats by</label>
                          <md-select ng-model="displayThreatsBy">
                              <md-option value="number" selected>{{ 'Number' | translate }}</md-option>
                              <md-option value="probability" >{{ 'Probability' | translate }}</md-option>
                              <md-option value="max_associated_risk" >{{ 'Max. associated risk level' | translate }}</md-option>
                          </md-select>
                      </md-input-container>

                      <div layout="line" white-space:"nowrap">

                          <md-input-container ng-show ="showVulnerabilitiesTabs">
                              <label translate>Display vulnerabilities by</label>
                              <md-select ng-model="displayVulnerabilitiesBy">
                                  <md-option value="max_associated_risk" selected>{{ 'Max. associated risk level' | translate }}</md-option>
                                  <md-option value="probability" >{{ 'Qualification' | translate }}</md-option>
                                  <md-option value="number" >{{ 'Number' | translate }}</md-option>
                              </md-select>
                          </md-input-container>

                          <md-input-container id="vulnerabilitiesDisplayedTab" ng-show ="showVulnerabilitiesTabs">
                              <label translate>Number of vulnerabilities to display</label>
                              <md-select ng-model="dashboard.vulnerabilitiesDisplayed">
                                  <md-option value="5" > 5 </md-option>
                                  <md-option value="10" > 10 </md-option>
                                  <md-option value="15" > 15 </md-option>
                                  <md-option value="20" selected> 20 </md-option>
                                  <md-option value="25" > 25 </md-option>
                                  <md-option value="30" > 30 </md-option>
                                  <md-option value="all" > {{ 'All' | translate }} </md-option>
                              </md-select>
                          </md-input-container>

                      </div>

                      <md-input-container ng-show ="showCartographyTabs">
                          <label translate>Type of risks</label>
                          <md-select ng-model="cartographyRisksType">
                              <md-option value="info_risks" selected>{{ 'Information risks' | translate }}</md-option>
                              <md-option value="op_risks" >{{ 'Operational risks' | translate }}</md-option>
                          </md-select>
                      </md-input-container>

                      <nvd3 ng-show ="dashboard.showGraphFrame1" id="graphFrame1" options="initOptionActualRisk" data="initDataActualRisk "  api="graphFrame1" config="{refreshDataOnly: true}"></nvd3>
                </div>
                <div layout="column" flex="35">
                    <p class="md-title" ng-show ="dashboard.showGraphFrame2" id="graphFrame2_title" translate>Target risks map</p>

                    <div layout="line">

                        <md-input-container id="riskTab" ng-show ="showRisksTabs">
                            <label translate>Display residual risks by</label>
                            <md-select ng-model="displayResidualRisksBy">
                                <md-option value="level" selected>{{ 'Level' | translate }}</md-option>
                                <md-option value="asset" >{{ 'Asset' | translate }}</md-option>
                            </md-select>
                        </md-input-container>

                        <md-input-container id="riskTab" ng-show ="showRisksTabs && displayResidualRisksBy=='level'">
                            <label translate>Type of chart</label>
                            <md-select ng-model="residualRisksChartOptions">
                                <md-option value="optionsCartoRisk_discreteBarChart" selected>{{ 'Discrete Bar Chart' | translate }}</md-option>
                                <md-option value="optionsCartoRisk_pieChart" >{{ 'Donut Chart' | translate }}</md-option>
                            </md-select>
                        </md-input-container>

                    </div>

                    <md-input-container id="threatsChartTypeOptions" ng-show ="showThreatsTabs">
                        <label translate>Chart type</label>
                        <md-select ng-model="threatsChartOption">
                            <md-option value="optionsChartThreats_discreteBarChart">{{ 'Discrete Bar Chart' | translate }}</md-option>
                            <md-option value="optionsChartThreats_multiBarHorizontalChart" selected>{{ 'Horizontal Bar Chart' | translate }}</md-option>
                        </md-select>
                    </md-input-container>

                    <md-input-container id="vulnerabilitiesChartTypeOptions" ng-show ="showVulnerabilitiesTabs">
                        <label translate>Number of vulnerabilities to display</label>
                        <md-select ng-model="vulnerabilitiesChartOption">
                            <md-option value="optionsChartVulnerabilities_discreteBarChart" selected> {{ 'Discrete Bar Chart' | translate }} </md-option>
                            <md-option value="optionsChartVulnerabilities_horizontalBarChart" > {{ 'Horizontal Bar Chart' | translate }} </md-option>
                        </md-select>
                    </md-input-container>

                      <nvd3 ng-show ="dashboard.showGraphFrame2" id="graphFrame2" options="initOptionResidualRisk" data="initDataResidualRisk " api="graphFrame2"  config="{refreshDataOnly: true}"></nvd3>
                    <div ng-if="showRisksTabs && !dashboard.carto.targeted">
                        <p><em>{{ 'No target risks specified in your risk analysis yet.' | translate }}</em></p>
                    </div>
                </div>
            </div>

            <div ng-if="!dashboard.anr" layout-align="center center" layout="column">
                <p class="md-subhead" translate>Information about the risks in your current risk analysis will show up here.</p>
                <md-button class="md-raised md-accent" ng-show="isAllowed('userfo')" ng-click="sidebarCreateNewANR($event)"><md-icon>add</md-icon> {{ 'Create a risk analysis' | translate }}</md-button>
            </div>

            <div>&nbsp;</div>

        </md-card-content>
<!--
        <div layout="row" layout-align="space-around" >
            <div layout="column" flex="50">
              <nvd3 options="optionsChartRisks" data="dataChartRisks" config="{refreshDataOnly: false}"></nvd3>
            </div>
        </div>  -->




    </md-card>









    <!-- <div layout="column">
        <md-card md-theme="orange">
            <md-card-content>
                <p class="md-title" translate>Quick access</p>
            </md-card-content>
        </md-card>

        <md-card md-theme="light">
            <md-list>
                <md-list-item ng-disabled="!clientCurrentAnr" ui-sref="main.project.anr({modelId: clientCurrentAnr.id})">
                    <md-icon>hourglass_empty</md-icon>
                    <p ng-if="clientCurrentAnr">
                        {{ 'Current analysis' | translate }}
                    </p>
                    <p ng-if="!clientCurrentAnr">
                        <em>{{ 'No analysis yet' | translate }}</em>
                    </p>

                </md-list-item>

                <md-list-item ng-disabled="true">
                    <md-icon>list</md-icon>
                    <p translate>Check my vulnerabilities</p>
                </md-list-item>

                <md-list-item ng-href="https://securitymadein.lu/en/contact/helpline/" target="_blank">
                    <md-icon>message</md-icon>
                    <p translate>Contact us</p>
                </md-list-item>
            </md-list>
        </md-card>
    </div> -->

</div>
